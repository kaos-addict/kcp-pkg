_realname=CuteMarkEd
pkgname=cutemarked
pkgver=0.11.0
pkgrel=1
pkgdesc="Qt Markdown Editor"
url="https://github.com/cloose/CuteMarkEd"
arch=('x86_64')
license=( "GPL2" )
depends=("qt5-webkit" "hunspell" "discount>=2.1.7")
makedepends=('qt5-tools')
source=("https://github.com/cloose/CuteMarkEd/archive/v$pkgver.tar.gz")
sha512sums=('6342600abb0e132affd45de93db10c58aa2ccfce2f4ad34266ceec0ab0e71cfa8f8933855b076c67c370d9d3e0b24e2539e62ea071faca1a9d9e982a4a4179b3')

prepare() {
  cd $srcdir/$_realname-$pkgver
  sed -i -e "s,#include <discount/mkdio.h>,#include <mkdio.h>,g" app-static/converter/discountmarkdownconverter.cpp
}

build() {
  cd $srcdir/$_realname-$pkgver
  qmake
  make || true #  the first make run might fail
  make
}

package() {
  cd $srcdir/$_realname-$pkgver
  make INSTALL_ROOT="$pkgdir" install
  mkdir -p "$pkgdir"/usr/bin
  #ln -s ../lib/qt/bin/cutemarked "$pkgdir"/usr/bin/cutemarked
} 
